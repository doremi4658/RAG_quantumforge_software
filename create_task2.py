import os
import json

# Словарь замен (оригинал -> замена)
terms_map = {
    "Luke Skywalker": "Илья Звездин",
    "Anakin Skywalker": "Андрей Звездин",
    "Leia Organa": "Елена Орлова",
    "Han Solo": "Ян Соколов",
    "Obi-Wan Kenobi": "Добрыня Светлов",
    "Yoda": "Яромир Мудрый",
    "Palpatine": "Властелин Тёмный",
    "Darth Vader": "Владек Теневой",
    "Darth Sidious": "Властелин",
    "Chewbacca": "Чуб",
    "R2-D2": "Пип",
    "C-3PO": "Золотой",
    "Tatooine": "Песчаная",
    "Coruscant": "Столица",
    "Alderaan": "Мирная",
    "Endor": "Лесная Луна",
    "Hoth": "Студёная",
    "Dagobah": "Топь",
    "Naboo": "Озёрная",
    "Jedi Order": "Орден Света",
    "Sith Order": "Орден Тьмы",
    "Galactic Republic": "Республика",
    "Galactic Empire": "Империя",
    "Rebel Alliance": "Сопротивление",
    "Humans": "Люди",
    "Wookiees": "Мохначи",
    "Ewoks": "Лесовики",
    "Lightsaber": "Меч Света",
    "Death Star": "Звезда Разрушения",
    "Millennium Falcon": "Сокол Тысячелетия",
    "The Force": "Поток",
    "Clone Wars": "Войны Копий",
    "Order 66": "Приказ 66"
}

# Содержимое файлов (31 шт.)
files_content = {
    "01_Илья_Звездин.txt": "Илья Звездин — человек, чувствительный к Потоку, сын светлого Андрея Звездина и сенатора Падме. Вырос на Песчаной под опекой дяди. Обучался у мастера Добрыни Светлова и мастера Яромира Мудрого. Стал ключевой фигурой в Галактической войне, уничтожил первую Звезду Разрушения. Восстановил Орден Света. Отказался сражаться с Властелином, вернув отца на светлую сторону Потока.",
    "02_Владек_Теневой.txt": "Владек Теневой (урождённый Андрей Звездин) — человек, легендарный пилот и светлый, перешедший на тёмную сторону Потока. Ученик Властелина. Тайно женился на Падме, отец Ильи Звездина и Елены Орловой. После дуэли с Добрыней Светловым на Мустафаре получил тяжёлые увечья и был помещён в чёрный кибернетический костюм. Служил главным исполнителем воли Императора. В конце жизни вернулся к свету и уничтожил Властелина.",
    "03_Елена_Орлова.txt": "Елена Орлова (урождённая Елена Звездина) — человек, принцесса и сенатор с планеты Мирная. Приёмная дочь сенатора Бейла Органы. Близнец Ильи Звездина. Один из лидеров Сопротивления. Похитила планы Звезды Разрушения. Позже — генерал Сопротивления в борьбе с Империей. Чувствительна к Потоку, прошла обучение у брата.",
    "04_Ян_Соколов.txt": "Ян Соколов — человек, контрабандист с планеты Кореллия. Капитан корабля «Сокол Тысячелетия». Вместе с мохначом Чубом занимался нелегальными перевозками. Присоединился к Сопротивлению после спасения принцессы Елены. Сыграл ключевую роль в уничтожении Звезды Разрушения. Позже женился на Елене, у них родился сын.",
    "05_Добрыня_Светлов.txt": "Добрыня Светлов — человек, мастер Ордена Света. Ученик мастера Квай-Гона. После смерти учителя взял в обучение Андрея Звездина. Участвовал в Войнах Копий. После перехода Андрея на тёмную сторону победил его в дуэли на Мустафаре. Взял под опеку младенца Илью и жил в изгнании на Песчаной под именем Старец. После смерти сохранил индивидуальность в Потоке.",
    "06_Яромир_Мудрый.txt": "Яромир Мудрый — представитель неизвестного древнего вида, Великий мастер Ордена Света. Более 800 лет обучал светлых. Был наставником графа Дуку, мастера Винду, Добрыни Светлова и Ильи Звездина. Сражался с Властелином, но потерпел поражение и ушёл в изгнание на Топь. Мудрейший и могущественный светлый своего времени.",
    "07_Властелин_Тёмный.txt": "Властелин Тёмный — человек с планеты Озёрная, сенатор, Верховный канцлер, затем Император Империи. Тайно был тёмным владыкой, мастером тёмных. Организовал Войны Копий, уничтожил Орден Света через Приказ 66. Правил Империей с помощью страха. Был уничтожен Владеком Теневым, но позже пытался возродиться.",
    "08_Чуб.txt": "Чуб — мохнач с планеты Кашиик. Напарник Яна Соколова, второй пилот и бортинженер «Сокола Тысячелетия». Участвовал в Войнах Копий на стороне Республики, затем в Галактической войне. Верный друг, обладающий огромной физической силой.",
    "09_Пип.txt": "Пип — дроид-астромеханик. Герой Войн Копий и Галактической войны. Сопровождал Падме, Андрея Звездина, Илью Звездина. Хранил в памяти важнейшую информацию, включая координаты Добрыни Светлова и послание принцессы Елены. Надёжный спутник Золотого.",
    "10_Золотой.txt": "Золотой — протокольный дроид, созданный Андреем Звездиным на Песчаной. Свободно владеет 6 миллионами языков. Постоянный спутник Пипа. Служил семье Звездиных, Сопротивлению. Обладает тревожным характером.",
    "11_Песчаная.txt": "Песчаная — пустынная планета во Внешнем Кольце с двумя солнцами. Родной мир Андрея и Ильи Звездиных. Населена людьми, джавами и песчаными людьми. Главные поселения: Космопорт и посёлок. Покрыта пустынями.",
    "12_Столица.txt": "Столица — планета-город, политический центр Галактики. Здесь располагались Храм Ордена Света, здание Сената, Императорский дворец. Поверхность полностью покрыта городскими уровнями. Планета-столица Республики, затем Империи.",
    "13_Мирная.txt": "Мирная — зелёная планета, известная миролюбивой культурой. Родной мир принцессы Елены Орловой. Уничтожена первой Звездой Разрушения по приказу гранд-моффа Таркина.",
    "14_Лесная_Луна.txt": "Лесная Луна — спутник газовой планеты, населённый лесовиками. Здесь находился щитогенератор, защищавший вторую Звезду Разрушения. Битва при Лесной Луне привела к уничтожению станции и гибели Властелина.",
    "15_Студёная.txt": "Студёная — ледяная планета. Здесь Сопротивление разместило базу «Эхо». Обнаруженная имперцами, планета стала местом битвы, где повстанцы понесли потери.",
    "16_Топь.txt": "Топь — болотистая планета, сильно насыщенная Потоком. Здесь скрывался в изгнании Яромир Мудрый. На Топи Илья Звездин прошёл обучение.",
    "17_Озёрная.txt": "Озёрная — идиллическая планета, разделённая на людей и гунганов. Родной мир Падме и Властелина. Место вторжения, положившего начало Войнам Копий.",
    "18_Орден_Света.txt": "Орден Света — древний орден, объединяющий чувствительных к Потоку, следующих светлой стороне. Защитники Республики. Базировались в Храме на Столице. Уничтожены Приказом 66. Восстановлены Ильёй Звездиным. Использовали Мечи Света.",
    "19_Орден_Тьмы.txt": "Орден Тьмы — последователи тёмной стороны Потока, стремящиеся к власти. Использовали красные Мечи Света. Почти уничтожены древними светлыми, возрождены тёмным владыкой, установившим Правило двух: один мастер и один ученик. Властелин и Владек Теневой — последние тёмные.",
    "20_Республика.txt": "Республика — демократическое государство, существовавшее тысячелетия. Управлялась Сенатом и Верховным канцлером. Защищалась армией клонов во время Войн Копий. Преобразована в Империю.",
    "21_Империя.txt": "Империя — режим, установленный Властелином. Характеризовалась террором и человекоцентризмом. Управлялась Императором. Распущена после битвы при Лесной Луне. Флот включал Звёзды Разрушения, разрушители, истребители.",
    "22_Сопротивление.txt": "Сопротивление — военно-политическая организация, боровшаяся против Империи. Сформировано из групп сопротивления. Ключевые фигуры: Мон Мотма, Елена Орлова, адмирал Акбар. Победа при Лесной Луне привела к восстановлению демократии.",
    "23_Люди.txt": "Люди — самая многочисленная раса в галактике. Адаптивны, присутствуют во всех слоях общества.",
    "24_Мохначи.txt": "Мохначи — высокая волосатая раса с планеты Кашиик. Обладают огромной силой, живут долго. Почитают долг чести. Знаменитый представитель — Чуб. При Империи были порабощены.",
    "25_Лесовики.txt": "Лесовики — маленькая разумная раса, населяющая Лесную Луну. Рост около метра, покрыты мехом. Примитивная технология, но искусны в ловушках. Помогли Сопротивлению разгромить имперцев.",
    "26_Меч_Света.txt": "Меч Света — оружие светлых и тёмных. Состоит из рукояти с кристаллом, создающим плазменный клинок. Цвет зависит от кристалла: синий и зелёный у светлых, красный у тёмных. Способен разрезать почти любую материю.",
    "27_Звезда_Разрушения.txt": "Звезда Разрушения — боевая космическая станция размером с луну. Вооружена суперлазером, способным уничтожать планеты. Первая уничтожена Ильёй Звездиным. Вторая уничтожена Сопротивлением у Лесной Луны.",
    "28_Сокол_Тысячелетия.txt": "Сокол Тысячелетия — модифицированный грузовой корабль. Принадлежал Яну Соколову. Непревзойдённая скорость и манёвренность. Участвовал в ключевых сражениях.",
    "29_Поток.txt": "Поток — энергетическое поле, создаваемое всеми живыми существами. Связывает галактику. Даёт способности: телекинез, ускорение, предвидение. Светлая сторона — гармония, тёмная — страсть. Мидихлорианы позволяют чувствовать Поток.",
    "30_Войны_Копий.txt": "Войны Копий — конфликт между Республикой и сепаратистами. Республика использовала армию клонов под командованием светлых. Сепаратисты — дроидов. Конфликт спланирован Властелином для уничтожения светлых через Приказ 66.",
    "31_Приказ_66.txt": "Приказ 66 — секретная директива в чипах клонов, предписывающая уничтожить всех светлых как предателей. Активирован Властелином в конце Войн Копий. Почти все светлые на передовой были убиты. Выжили единицы: Яромир Мудрый, Добрыня Светлов."
}

# Путь к целевой папке Task 2 (относительно корня проекта)
target_dir = os.path.join(os.getcwd(), "Task 2")
kb_dir = os.path.join(target_dir, "knowledge_base")

# Создаём папки
os.makedirs(kb_dir, exist_ok=True)

# Сохраняем файлы
for filename, content in files_content.items():
    file_path = os.path.join(kb_dir, filename)
    with open(file_path, "w", encoding="utf-8") as f:
        f.write(content)

# Сохраняем словарь замен
json_path = os.path.join(target_dir, "terms_map.json")
with open(json_path, "w", encoding="utf-8") as f:
    json.dump(terms_map, f, ensure_ascii=False, indent=2)

print(f"✅ База знаний создана в папке: {kb_dir}")
print(f"✅ Словарь замен создан: {json_path}")